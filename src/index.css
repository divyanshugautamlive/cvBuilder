/* Phase 2 CSS Imports */
@import './styles/ai-components.css';
@import './styles/cover-letter.css';
@import './styles/version-manager.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* A4 Page Rules for Print/Export */
/* A4 Page Rules for Print/Export */
@page {
    size: A4;
    margin: 0;
    /* We handle margins in the body/content to ensure background colors bleed if needed */
}

/* Print Specifics - The Real Export Logic */
@media print {

    html,
    body {
        width: 210mm;
        height: 297mm;
        margin: 0;
        padding: 0;
        overflow: visible !important;
    }

    /* Hide everything except the printable area */
    body * {
        visibility: hidden;
    }

    #resume-preview,
    #resume-preview * {
        visibility: visible;
    }

    #resume-preview {
        position: absolute;
        left: 0;
        top: 0;
        width: 210mm;
        /* Remove fixed height for print so it flows naturally */
        min-height: 297mm;
        height: auto !important;
        margin: 0;
        padding: 0 !important;
        /* Reset padding, let the inner container handle it if needed */
        box-shadow: none;
        transform: none !important;
        overflow: visible !important;
        background: white;
    }

    /* Important: Force background graphics to print */
    * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }

    /* Hide the visual page break markers in print */
    .page-break-marker {
        display: none !important;
    }
}

/* Page Break Utilities */
.break-inside-avoid {
    page-break-inside: avoid;
    break-inside: avoid;
}

.break-before-always {
    page-break-before: always;
    break-before: always;
}

/* Visual Editor Styles (Screen Only) */
@media screen {
    #resume-preview {
        width: 210mm;
        /* Visual simulation of pages using repeating gradient */
        min-height: 297mm;
        /* Dashed line every 297mm - 1px line, then transparent */
        background-image: linear-gradient(to bottom, transparent, transparent calc(297mm - 1px), #e5e7eb calc(297mm - 1px), #e5e7eb 297mm);
        background-size: 100% 297mm;
        position: relative;
    }

    /* Add a subtle "Page 2", "Page 3" marker on hover or always? 
       Let's keep it simple: A shadow line is good.
       We can also add a right-side marker index if desired, but let's stick to the subtle line first. 
    */
    .page-break-marker {
        position: absolute;
        left: 0;
        right: 0;
        border-bottom: 2px dashed #ff4d4d;
        /* Red dashed line for visibility */
        opacity: 0.5;
        pointer-events: none;
        z-index: 50;
    }
}

/* ATS-friendly base styles - black text, white background */
#resume-preview {
    color: #000000;
    background-color: #ffffff;
}

#resume-preview h1,
#resume-preview h2,
#resume-preview h3 {
    color: #000000;
}

/* Template Count Badge */
.template-count-badge {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 4px 12px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 13px;
}

/* Custom Scrollbar */
.custom-scrollbar::-webkit-scrollbar {
    width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
    background: #f1f1f1;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #a1a1a1;
}


/* -------------------------------------------------------------------------- */
/*                 PHASE 2 UPDATE: UNIVERSAL INLINE EDITING                   */
/* -------------------------------------------------------------------------- */

/* Individual Editable Elements (NOT containers) */
.auto-editable {
    cursor: text;
    position: relative;
    transition: all 0.2s ease;
}

.auto-editable:hover {
    background-color: rgba(52, 152, 219, 0.05);
    outline: 1px dashed rgba(52, 152, 219, 0.3);
    outline-offset: 2px;
}

.auto-editable:focus {
    outline: 2px solid #3498db;
    outline-offset: 2px;
    background-color: rgba(52, 152, 219, 0.08);
}

/* Allow text selection within editable elements */
.auto-editable * {
    user-select: text;
    -webkit-user-select: text;
    -moz-user-select: text;
}

/* Fix cursor for nested elements */
.auto-editable * {
    cursor: text;
}

/* Placeholder for empty elements */
.auto-editable:empty:before {
    content: attr(data-placeholder);
    color: #999;
    font-style: italic;
}

/* Active formatting state in toolbar */
.toolbar-btn.active {
    background: #3498db;
    color: white;
    border-color: #2980b9;
}

/* Better visual feedback for editing mode */
.editing-enabled .auto-editable:hover::after {
    content: '✏️';
    position: absolute;
    top: -20px;
    right: 0;
    font-size: 12px;
    background: #3498db;
    color: white;
    padding: 2px 6px;
    border-radius: 3px;
    opacity: 0;
    transition: opacity 0.2s;
    pointer-events: none;
    z-index: 100;
}

.editing-enabled .auto-editable:hover::after {
    opacity: 1;
}

/* Prevent selection of toolbar itself */
.rich-text-toolbar,
.preview-controls {
    user-select: none;
    -webkit-user-select: none;
}

/* Smooth text selection */
.editable-template-wrapper ::selection {
    background-color: #3498db;
    color: white;
}

.editable-template-wrapper ::-moz-selection {
    background-color: #3498db;
    color: white;
}

/* Edit Mode Info Panel */
.edit-mode-info {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 6px;
    padding: 12px 16px;
    margin-top: 12px;
    margin-bottom: 12px;
}

.edit-mode-info p {
    margin: 4px 0;
    font-size: 13px;
    color: #495057;
}

.edit-mode-info kbd {
    background: #e9ecef;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: monospace;
    font-size: 12px;
    border: 1px solid #ced4da;
}

/* OLD STYLES CLEANUP (Optional keeping some for reference or specific use cases) */
.editable-wrapper {
    position: relative;
    /* Can remove if completely replaced */
}